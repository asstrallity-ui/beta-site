<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loader ASTR</title>
    <link rel="stylesheet" href="style.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen">
        <div class="loader-container">
            <div class="status-text">Загрузка каталога<span class="dots"></span></div>
            <div class="progress-track">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-area">
                <img src="https://i.imgur.com/6Jj3J3k.png" class="logo-icon-img" alt="icon">
                <h1>LOADER ASTR</h1>
            </div>
            <nav class="nav-menu">
                <button class="nav-item active" data-tab="home">
                    <span class="material-symbols-outlined">grid_view</span>
                    <span>Главная</span>
                </button>
                <button class="nav-item" data-tab="installed">
                    <span class="material-symbols-outlined">inventory_2</span>
                    <span>Установлено</span>
                </button>
                <button class="nav-item" data-tab="settings">
                    <span class="material-symbols-outlined">settings</span>
                    <span>Настройки</span>
                </button>
                <button class="nav-item" data-tab="about">
                    <span class="material-symbols-outlined">info</span>
                    <span>О программе</span>
                </button>

                <!-- ДОБАВЛЕННАЯ КНОПКА ТЕСТ ГЕО -->
                <div style="flex-grow:1"></div>
                <button id="btn-test-geo" class="nav-item" style="color: var(--md-sys-color-primary);">
                    <span class="material-symbols-outlined">security</span>
                    <span>Тест ГЕО</span>
                </button>
            </nav>
            <div class="sidebar-footer">
                v1.0.0 | Build 240
            </div>
        </div>

        <!-- Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="status-indicator">
                    <div id="ping-dot" class="status-dot"></div>
                    <span id="ping-text">Подключение...</span>
                </div>
                <div class="top-bar-actions">
                    <!-- Socials -->
                    <div class="social-links">
                        <a href="#" class="social-btn telegram-btn"><span class="material-symbols-outlined">send</span></a>
                        <a href="#" class="social-btn telegram-btn"><span class="material-symbols-outlined">forum</span></a>
                    </div>
                    
                    <!-- Divider -->
                    <div class="divider-vertical"></div>
                    
                    <!-- Main Action Buttons (Beautiful Style) -->
                    <div class="social-links">
                        <button id="btn-check-updates" class="action-circle-btn" title="Проверить обновления">
                            <span class="material-symbols-outlined">sync</span>
                        </button>
                        <button id="global-repair-btn" class="action-circle-btn" title="Починить моды">
                            <span class="material-symbols-outlined">build</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Scroll Area -->
            <div id="content-area">
                <!-- Dynamic Content -->
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Progress Modal -->
    <div id="progress-modal" class="modal-overlay hidden">
        <div class="modal-window">
            <button id="modal-close-btn" class="modal-close-icon">
                <span class="material-symbols-outlined">close</span>
            </button>
            <h2 id="modal-title">Установка...</h2>
            
            <div id="install-view">
                <div class="progress-info-row">
                    <p id="modal-status">Подготовка...</p>
                    <span id="progress-percent">0%</span>
                </div>
                <div class="progress-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
            </div>

            <div id="success-view" class="view-hidden">
                <span class="material-symbols-outlined success-icon">check_circle</span>
                <h3>Успешно установлено</h3>
                <p class="error-text">Можете запускать игру</p>
            </div>

            <div id="error-view" class="view-hidden">
                <span class="material-symbols-outlined error-icon">error</span>
                <h3>Что-то пошло не так</h3>
                <p id="error-message" class="error-text">Ошибка</p>
            </div>
        </div>
    </div>

    <!-- Repair Modal -->
    <div id="repair-modal" class="modal-overlay hidden">
        <div class="modal-window" style="width: 450px;">
            <button id="repair-close-btn" class="modal-close-icon">
                <span class="material-symbols-outlined">close</span>
            </button>
            <h2>Управление модами</h2>
            <p class="modal-subtitle">Выберите мод для удаления или починки:</p>
            <div id="repair-list" class="repair-list">
                <!-- Items -->
            </div>
        </div>
    </div>

    <!-- Info/Buy Modal -->
    <div id="info-modal" class="modal-overlay hidden">
        <div class="modal-window" style="width: 500px;">
            <button id="info-close-btn" class="modal-close-icon">
                <span class="material-symbols-outlined">close</span>
            </button>
            <h2 id="info-modal-title">Название мода</h2>
            <div id="info-modal-content">
                <p id="info-modal-desc" class="info-description">Описание...</p>
                <div id="info-modal-price-block"></div>
                <button id="info-modal-action" class="modal-action-btn">
                    Действие
                </button>
            </div>
        </div>
    </div>

    <!-- Update Modal -->
    <div id="update-modal" class="modal-overlay hidden">
        <div class="modal-window">
            <h2>Доступно обновление</h2>
            <div style="margin: 20px 0; text-align: left;">
                <div class="info-row"><span class="info-label">Версия:</span> <span class="info-value" id="update-version">v1.0.1</span></div>
                <div class="info-row"><span class="info-label">Размер:</span> <span class="info-value" id="update-size">15 MB</span></div>
                <p style="margin-top:10px; color:#999; font-size:14px;">Список изменений:</p>
                <p id="update-changelog" style="color:#fff; font-size:14px; white-space: pre-wrap; max-height:100px; overflow-y:auto; margin-bottom:10px;">- fix</p>
            </div>
            <button id="btn-start-update" class="modal-action-btn">Обновить сейчас</button>
            <button id="btn-skip-update" style="margin-top:10px; background:transparent; border:1px solid #555; color:#aaa;" class="modal-action-btn">Позже</button>
        </div>
    </div>

    <!-- GEO BLOCK MODAL -->
    <div id="geo-modal" class="modal-overlay hidden">
        <div class="geo-window">
            <span class="material-symbols-outlined" style="font-size: 48px; color: #ff5252; margin-bottom: 16px;">block</span>
            <h2 style="color: #ff5252; margin-bottom: 12px;">ОБНАРУЖЕН УКРАИНСКИЙ IP</h2>
            <p style="color: #e0e0e0; font-size: 14px; line-height: 1.5; margin-bottom: 24px;">
                Для корректной работы лаунчера требуется сменить язык интерфейса на Русский и перезапустить приложение.
                <br><br>
                Пожалуйста, отключите VPN если он включен, или подтвердите смену настроек.
            </p>
            <button id="btn-geo-fix" class="modal-action-btn" style="background-color: #ff5252; color: #fff;">
                <span class="material-symbols-outlined">autorenew</span>
                Сменить на RU и Перезапустить
            </button>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast-notification" class="toast hidden">Уведомление</div>

    <script src="script.js"></script>
</body>
</html>
