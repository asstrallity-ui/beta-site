:root {
    --md-sys-color-background: #101010;
    --md-sys-color-surface: #1e1e1e;
    --md-sys-color-surface-variant: #2c2c2c;
    --md-sys-color-primary: #d0bcff;
    --md-sys-color-primary-rgb: 208, 188, 255;
    --md-sys-color-on-primary: #381e72;
    --md-sys-color-secondary-container: #4a4458;
    --md-sys-color-on-surface: #e6e1e5;
    --md-sys-color-outline: #938f99;
    --md-sys-color-error: #f2b8b5;
    
    --glass-bg: rgba(255, 255, 255, 0.03);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    --glass-hover-bg: rgba(255, 255, 255, 0.05);
    --glass-hover-border: var(--md-sys-color-primary);
    --glass-hover-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    --glass-blur: 20px;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Roboto', sans-serif; user-select: none; }

body {
    background-color: var(--md-sys-color-background);
    color: var(--md-sys-color-on-surface);
    height: 100vh;
    overflow: hidden;
    display: flex;
    background-image:
    radial-gradient(circle at top right, rgba(var(--md-sys-color-primary-rgb), 0.08) 0%, transparent 40%),
    radial-gradient(circle at bottom left, rgba(var(--md-sys-color-primary-rgb), 0.05) 0%, transparent 40%);
}

/* SPLASH SCREEN */
#splash-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--md-sys-color-background);
    z-index: 9999; display: flex; align-items: center; justify-content: center;
    transition: opacity 0.5s ease, visibility 0.5s;
}
.splash-logo span { font-size: 64px; color: var(--md-sys-color-primary); animation: pulse 2s infinite; }
@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.7; } 100% { transform: scale(1); opacity: 1; } }

/* SIDEBAR */
.sidebar {
    width: 260px;
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    border-right: 1px solid var(--glass-border);
    display: flex; flex-direction: column;
    padding: 20px;
    z-index: 10;
}

.app-logo { display: flex; align-items: center; gap: 12px; margin-bottom: 40px; padding-left: 10px; }
.logo-icon { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; }
.app-title { font-size: 18px; font-weight: 700; letter-spacing: 1px; }

.nav-menu { display: flex; flex-direction: column; gap: 8px; flex-grow: 1; }
.nav-item {
    display: flex; align-items: center; gap: 16px; padding: 12px 20px;
    border-radius: 28px; cursor: pointer; transition: 0.2s;
    color: var(--md-sys-color-outline);
    font-weight: 500;
}
.nav-item:hover { background: rgba(255, 255, 255, 0.05); color: #fff; }
.nav-item.active { background: rgba(var(--md-sys-color-primary-rgb), 0.15); color: var(--md-sys-color-primary); }

/* STATUS BAR */
.status-bar {
    border-top: 1px solid var(--glass-border);
    padding-top: 20px;
    display: flex; justify-content: space-between; align-items: center;
    font-size: 12px; color: var(--md-sys-color-outline);
}
.ping-indicator { display: flex; align-items: center; gap: 8px; }
.dot { width: 8px; height: 8px; border-radius: 50%; background-color: #4caf50; transition: background 0.3s; }

/* MAIN CONTENT */
.main-content { flex-grow: 1; display: flex; flex-direction: column; position: relative; }

.header {
    height: 70px;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 32px;
    border-bottom: 1px solid var(--glass-border);
}
.page-title { font-size: 20px; font-weight: 600; }
.header-actions { display: flex; gap: 12px; }
.icon-btn {
    background: transparent; border: none; color: var(--md-sys-color-outline);
    cursor: pointer; padding: 8px; border-radius: 50%; transition: 0.2s;
}
.icon-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }

#content-area { padding: 32px; overflow-y: auto; height: calc(100vh - 70px); }

/* MODS GRID */
.mods-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; }
.mod-card {
    background: var(--glass-bg); border: 1px solid var(--glass-border);
    border-radius: 24px; overflow: hidden;
    display: flex; flex-direction: column;
    transition: 0.2s;
}
.mod-card:hover {
    transform: translateY(-4px);
    border-color: var(--md-sys-color-primary);
    box-shadow: var(--glass-hover-shadow);
}
.mod-image { width: 100%; height: 160px; object-fit: cover; background: #222; }
.mod-content { padding: 16px; display: flex; flex-direction: column; flex-grow: 1; }
.mod-title { font-size: 18px; font-weight: 600; margin-bottom: 4px; }
.mod-author { font-size: 12px; color: var(--md-sys-color-outline); margin-bottom: 8px; }
.mod-desc { font-size: 14px; color: #ccc; flex-grow: 1; margin-bottom: 16px; line-height: 1.4; }
.install-btn {
    background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary);
    border: none; padding: 10px; border-radius: 20px;
    width: 100%; font-weight: 600; cursor: pointer;
    display: flex; align-items: center; justify-content: center; gap: 8px;
    transition: 0.2s;
}
.install-btn:hover { opacity: 0.9; }
.install-btn.installed { background: rgba(255,255,255,0.1); color: #fff; cursor: default; }

/* SETTINGS */
.settings-section { margin-bottom: 32px; }
.settings-title { font-size: 18px; font-weight: 600; margin-bottom: 16px; color: var(--md-sys-color-primary); }
.setting-item {
    display: flex; justify-content: space-between; align-items: center;
    background: rgba(255,255,255,0.03); padding: 16px 24px; border-radius: 16px;
    border: 1px solid var(--glass-border); margin-bottom: 12px;
}
.setting-info h4 { font-size: 16px; font-weight: 500; margin-bottom: 4px; }
.setting-info p { font-size: 13px; color: var(--md-sys-color-outline); }

/* SWITCH */
.switch { position: relative; display: inline-block; width: 50px; height: 28px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #36343b; border-radius: 34px; transition: .4s; border: 2px solid #555; }
.slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 2px; bottom: 2px; background-color: #aaa; border-radius: 50%; transition: .4s; }
input:checked + .slider { background-color: var(--md-sys-color-primary); border-color: var(--md-sys-color-primary); }
input:checked + .slider:before { transform: translateX(22px); background-color: var(--md-sys-color-on-primary); }

/* COLORS */
.color-options { display: flex; gap: 12px; }
.color-circle { width: 32px; height: 32px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; transition: transform 0.2s; }
.color-circle:hover { transform: scale(1.1); border-color: #fff; }

/* MODAL OVERLAY */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px);
    z-index: 2000; display: flex; align-items: center; justify-content: center;
    opacity: 1; transition: opacity 0.3s;
}
.modal-overlay.hidden { opacity: 0; pointer-events: none; }

.modal-window {
    width: 480px; background: #1e1e1e; border-radius: 24px; padding: 24px;
    border: 1px solid var(--glass-border);
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    position: relative;
    display: flex; flex-direction: column;
}

.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.modal-title { font-size: 20px; font-weight: 600; }
.close-btn { background: transparent; border: none; color: #aaa; cursor: pointer; padding: 4px; }
.close-btn:hover { color: #fff; }

.view-hidden { display: none !important; }

/* PROGRESS */
.progress-info { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; color: #ccc; }
.progress-track { width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--md-sys-color-primary); width: 0%; transition: width 0.2s; }

/* SUCCESS / ERROR VIEW */
#success-view, #error-view { text-align: center; padding: 20px; }
.success-icon { font-size: 64px; color: #4caf50; margin-bottom: 16px; }
.error-text { color: var(--md-sys-color-error); }

/* INFO MODAL */
.info-row { display: flex; justify-content: space-between; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #333; }
.info-label { color: #aaa; }
.info-value { font-weight: 600; }
.info-desc-box { background: #252525; padding: 16px; border-radius: 12px; margin-bottom: 20px; font-size: 14px; line-height: 1.5; max-height: 150px; overflow-y: auto; }
.price-tag {
    text-align: center; font-size: 20px; font-weight: 700; color: var(--md-sys-color-primary);
    padding: 12px; background: rgba(var(--md-sys-color-primary-rgb), 0.1);
    border-radius: 12px; margin-bottom: 20px;
}
.modal-action-btn {
    width: 100%; padding: 14px; border-radius: 16px; border: none;
    background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary);
    font-weight: 600; cursor: pointer; text-transform: uppercase; letter-spacing: 1px;
}
.modal-action-btn:hover { opacity: 0.9; }

/* REPAIR LIST */
.repair-list { max-height: 300px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
.repair-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 12px; background: #2a2a2a; border-radius: 12px;
}
.repair-btn-small {
    background: transparent; border: 1px solid var(--md-sys-color-outline);
    color: var(--md-sys-color-outline); padding: 6px 12px; border-radius: 8px; cursor: pointer;
}
.repair-btn-small:hover { border-color: var(--md-sys-color-error); color: var(--md-sys-color-error); }

/* UPDATE MODAL */
.update-info { background: #2a2a2a; padding: 16px; border-radius: 12px; margin-bottom: 20px; }
.update-header-row { display: flex; justify-content: space-between; margin-bottom: 12px; font-weight: 600; }
.changelog-box { font-size: 14px; line-height: 1.4; color: #ccc; }
.modal-footer { display: flex; gap: 12px; }
.btn-primary { flex: 1; padding: 12px; border-radius: 12px; border: none; background: var(--md-sys-color-primary); color: #000; font-weight: 600; cursor: pointer; }
.btn-secondary { flex: 1; padding: 12px; border-radius: 12px; border: 1px solid #555; background: transparent; color: #fff; cursor: pointer; }

/* TOAST */
.toast {
    position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%);
    background: #333; color: #fff; padding: 12px 24px; border-radius: 50px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5); z-index: 3000; opacity: 1; transition: 0.3s;
}
.toast.hidden { opacity: 0; transform: translate(-50%, 20px); pointer-events: none; }

/* --- VPN ALERT STYLES --- */
#btn-test-vpn {
    margin-top: auto;
    color: #f2b8b5;
    font-size: 0.85rem;
    transition: background-color 0.2s, color 0.2s;
}
#btn-test-vpn:hover {
    background-color: rgba(242, 184, 181, 0.1);
    color: #ffdad6;
}
#btn-test-vpn .material-symbols-rounded { color: #f2b8b5; }

#vpn-modal .modal-window {
    border-color: #f2b8b5;
    box-shadow: 0 0 50px rgba(242, 184, 181, 0.2);
}

#btn-vpn-reload {
    background-color: #f2b8b5;
    color: #601410;
    width: 100%;
    padding: 14px;
    border-radius: 16px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: opacity 0.2s;
}
#btn-vpn-reload:hover { opacity: 0.9; }
